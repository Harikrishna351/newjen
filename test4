def jiraUrl = "https://your-jira-instance.atlassian.net/rest/api/2/issue/ISSUE-123" // Replace with your issue URL

def response = sh(script: "curl -s -k $jiraUrl", returnStatus: true, returnStdout: true)

if (response == 0) {
    def issueDetails = readJSON text: response
    def issueStatus = issueDetails.fields.status.name

    if (issueStatus == "Open") {
  
        error("A Jira ticket is in 'Open' status. Aborting the pipeline.")
    } else {
       
        echo "The Jira ticket is not in 'Open' status. Proceeding with the pipeline."
      
    }
} else {
   
    error("Failed to fetch Jira issue details. Aborting the pipeline.")
}
